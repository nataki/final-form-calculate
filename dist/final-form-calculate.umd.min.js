!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((n="undefined"!=typeof globalThis?globalThis:n||self)["final-form-calculate"]={})}(this,function(n){"use strict";function i(){return(i=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t,r=arguments[e];for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}return n}).apply(this,arguments)}function s(n,e){for(var t=u(e),r=n,o=0;o<t.length;o++){var i=t[o];if(null==r||"object"!=typeof r||Array.isArray(r)&&isNaN(i))return;r=r[i]}return r}function l(n){return!!n&&("object"==typeof n||"function"==typeof n)&&"function"==typeof n.then}function p(n,e){return n===e}var t=".".charCodeAt(0),c=/\\(\\)?/g,r=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),f={},u=function(n){if(null==n||!n.length)return[];if("string"!=typeof n)throw new Error("toPath() expects a string");var e,o;return null==f[n]&&(f[n]=(o=[],(e=n).charCodeAt(0)===t&&o.push(""),e.replace(r,function(n,e,t,r){t?n=r.replace(c,"$1"):e&&(n=e.trim()),o.push(n)}),o)),f[n]};n.default=function(n){var e=n.calculations,t=n.runOnInit,r=void 0===t||t,o=n.isPaused;return function(u){var a={};return u.subscribe(function(n){var f=n.values;console.log("calculate"),r||!u.getState().pristine?o&&o()||u.batch(function(){function i(n,e,t){var r,o=f&&s(f,n),i=a&&s(a,n);e(o,i)||("function"==typeof t?(r=t(o,n,f,a),l(r)?r.then(function(e){Object.keys(e).forEach(function(n){u.change(n,e[n])})}):Object.keys(r).forEach(function(n){u.change(n,r[n])})):Object.keys(t).forEach(function(e){var n=(0,t[e])(o,f,a);l(n)?n.then(function(n){u.change(e,n)}):u.change(e,n)}))}var c=u.getRegisteredFields();e.forEach(function(n){var e,t=n.field,r=n.isEqual,o=n.updates;"string"==typeof t?i(t,r||p,o):(e=Array.isArray(t)?function(e){return~t.indexOf(e)||-1!==t.findIndex(function(n){return n instanceof RegExp&&n.test(e)})}:function(n){return t.test(n)},c.forEach(function(n){e(n)&&i(n,r||p,o)}))}),a=f}):Object.keys(a).length||(console.log("pristine",a,f),a=i({},f))},{values:!0})}},Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=final-form-calculate.umd.min.js.map
